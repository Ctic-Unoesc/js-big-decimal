var divide = require('../lib/divide').divide;

describe('divide', function(){
    it('test failing scenario', function(){
        expect(divide('509365950.27576', '0.003802940215600348', 16)).toBe('133940036234.6609666927392804');
    })
    xit('should return correct result', function(){
        let count = 2000, err = 0;
        while(count-- > 0){
            let dividend = (Math.random()*(Math.pow(10, Math.floor(Math.random()*10)))).toFixed(5);
            let divisor = (Math.random()*(Math.pow(10, Math.floor(Math.random()*10))));
            if(divisor==0){
                count++;
                continue;
            }
            let jsOut = dividend/divisor;
            let myOut = parseFloat(divide(dividend.toString(), divisor.toString(), 5));
            if(isNaN(myOut) || Math.abs(jsOut-myOut)>0.00001){
                console.log(`${dividend}/${divisor} = ${jsOut} != ${myOut}`);
                err++;
            }else
            {
                //console.log(`${dividend}/${divisor} = ${jsOut} == ${myOut}`);
            }
        }
        expect(err).toBe(0);
    });
    it('should do basic integer division', function(){
        expect(divide(1234, 12, 2)).toBe('102.83');
    });
    it('should do basic floating point division', function(){
        expect(divide(12.34, 12, 2)).toBe('1.03');
    });
    it('should do basic floating point division', function(){
        expect(divide(29629629362962961839.48344234, 12345678901234567890, 2)).toBe('2.40');
    });
    it('should do basic floating point division', function(){
        expect(divide('296296293629629614563475463462345345235412412341235436563456829629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683939296296293629629614563475463462345345235412412341235436563456829629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683939.48344234', '1000', 10)).toBe('296296293629629614563475463462345345235412412341235436563456829629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683939296296293629629614563475463462345345235412412341235436563456829629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683929629629362962961456347546346234534523541241234123543656345683.9394834423');
    });
})